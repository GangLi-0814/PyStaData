### CCER讨论稿：文本大数据分析在经济学和金融学中的应用： 一个文献综述

[CCER讨论稿全文下载](https://www.nsd.pku.edu.cn/cbw/tlg1/2018a/250283.htm)

# 1. 引言

作为数据来源，文本大数据至少有三个特征：
- 数据来源多样化。目前文本数据库的主要数据源包括新闻、网络论坛帖子、公司财报、消费者评价、重要人物的发言等。但还有大量的文本数据尚未被研究所使用，如政府工作报告和规划、网络自媒体公众号文章、微博大V 观点、书籍、档案、专利网站、法院判
决、医生处方等。
- 数据体量呈现几何级增长。
- 时频高。

将文本大数据应用于经济学和金融学研究的核心挑战在于如何准确、有效率地从文本中提取需要的信息，并考察其对相应问题的解释或预测能力。
![文本信息提取步骤](C:\Users\mudaozi\Documents\notes_archive\text_bigdata\img\文本信息提取步骤.jpg)
上图中，第 3 步（利用结构化数据来完成解释或预测 Y 的工作）是计量经济学和统计学研究的重点。文章则主要介绍了文本信息提取方法和经济金融各领域文本数据的应用。

# 2. 文本大数据信息提取方法

## 2.1 原始文本库到数据矩阵的结构化转换
自然语言理解中的主要障碍是同一字（词）的含义在不容场景或语境下有变化；再就是由于文字的多样性，在转换为数据矩阵后往往需要处理高维稀疏矩阵相关的问题。

### 2.1.1 分词技术
英文单词由空格隔开，单词就实现了分词。实证中会将单个词语扩展成长度为 n 的词组，即 n 元词组（n-gram）。但中文汉字为连续序列，所以需要分词。根据分割原理，可将现有分词方法归纳为**基于字符串匹配**、**基于理解**和**基于统计**三类。
|方法|描述|
|:--:|:--:|
|基于字符串匹配|将待分析的汉字串与前定的词典词条匹配，若某个字符串可在词典中找到，则记为识别出一个词。该方法的好处是简便快速，但忽略歧义问题|
|基于理解|在分词的同时进行句法、语义分析，以改进对歧义词的处理|
|基于统计|先用机器学习模型学习已经切分好的词语的规律，进而实现对未知文本的切分，常用方法包括最大概率分词法和最大熵分词法等|
目前文献中用到的分词方法常将三种方法结合。需要注意的是，由于一些特定领域的文本包含一些对信息提取比较重要的专有词语（如上市公司名称、金融术语等），因此常常需要根据研究问题拓展现有词典，以提高软件识别和分割词语的准确度。

### 2.1.2 词转换为向量的技术
完成分词之后需要完成的是如何将文本进一步转化为数字化矩阵。如果将一篇文本视作从所有词语库中挑选若干词形成的组合，这一转换的主要挑战往往是如何对由词语构成的高维矩阵实现降维的问题。要理解这一点首先需要了解独热表示法（One-hot representation）。
#### 2.1.2.1 独热表示法
独热法的特点是忽略语法和语序等要素，将文本数据看作是若干独立词汇的集合。
例如，原始文本库 Ψ 由两条帖子组成。第一条的内容是“明天涨停。后天涨停没戏。”，第二条是“玛丽有个小绵羊。”分词后得 “明天、涨停、后天、没戏、玛丽、有、个、小、绵羊”九个不同词语，即𝑁 = 9。用独热法则“明天”用向量[1,0,0,0,0,0,0,0,0]表示，“涨停”为[0,1,0,0, 0,0,0,0,0]，以此类推。于是第一个帖子可用向量[1,2,1,1,0,0,0,0,0]表示,第二个帖子即[0,0,0,0,1,1,1,1,1]。

上述步骤显示，独热法操作简单；但数据量大时转换后的矩阵往往是高维稀疏数据矩阵。这是由词向量维数由词语数量决定、并且大部分词语出现频率低，因此文本对应的向量中绝大部分值为零的特征决定的。另外，独热法可能因忽略上下文结构而会产生歧义。例如上例中第一个帖子转换成的向量也可以是 “明天涨停没戏。后天涨停。”的转换结果，这和原文的含义产生了偏差。

解决高维稀疏矩阵的问题：一是采取多种措施对数字化文本实现降维；二是采用词语嵌入技术（Word Embedding），直接在词语转换为数字化矩阵时就将词语转化为低维向量。

### 2.1.2.2 词嵌入技术
常用词嵌入算法：
- Word2Vec：先用向量代表各个词，然后通过神经网络模型, 在大量的文本语料数据上来学习这些向量的参数。
-  GloVe

## 2.2 数据矩阵的信息提取
现有经济和金融领域文本相关分析的问题大致可分为两类：
1. 区分文本显示的投资者情绪正负、新闻或者文件语调正负、报纸属于左派还是右派、以及行业分类等聚类问题。
2. 对情绪、不确定性、恐慌程度、意见分歧程度的度量以及相应的回归问题。

### 2.2.1 无监督学习方法
#### 2.2.1.1 词典法
该方法从预先设定的词典出发，通过统计文本数据中不同类别词语出现的次数，结合不同的加权方法来提取文本信息。使用词典法的一个关键环节是选择或构建合适的词典，这里词典包括了特定词典，也包括作者构造的特定词语或词组的集合。

英文常见词典如下：
|词典|特点|文献|
|:--:|:--:|:--:|
|Harvard IV-4 |包含心理和社会学常涉及的 1045 个正面词语和 1160 个负面词语，并非为金融领域文本专门创建|Tetlock(2007)；Tetlock et al.(2008)；Jegadeesh and Wu(2013)|
|Henry|专门为金融文本构建的词典|Henry(2008)；Price et al.(2012)|
|Diction|包含 686 个正面词汇和 920 个负面词汇，主要应用于会计领域|Rogers et al.(2011)；Davis et al.(2012)|
|Loughran and McDonald（简称：LM）|从上市公司的 10-K 文件中人工收集并整理构造出来，他们的实证结果表明LM 词典在度量文本情绪方面比Harvard IV-4 词典和Diction词典的效果更好，因此目前用词典法分析金融、会计领域文本情绪时多采用LM词典|Garcia(2013)； Huang et al. (2014)； Loughran and McDonald(2014)；Solomon et al.(2014)|

中文词典：
|词典|特点|文献|
|:--:|:--:|:--:|
|适用于中国股吧论坛的金融情绪词典|随机抽取2008 到2018 年间某股票论坛四万条帖子，人工挑取其中正、负面词语|Chen et al.（2018）|
|中国财经媒体领域的正负面词库|手动整理新闻报道，结合《现代汉语词典》、《最新汉英经济金融常用术语使用手册》、LM 词典中文版以及知网-中文信息结构库等词库|汪昌云和武佳薇（2015）|
|适用于金融科技领域的情感词词典|根据和讯网上的新闻|王靖一和黄益平（2018）|

除了确定词典，另一个重要的问题是如何确定词语权重。常见的加权方法有**等权重**、**词频-逆文档（TF-IDF）加权**和**对应变量加权**三种。
|加权方法|特点|
|:---|:---|
|等权重法|假定文本中每个词语的重要程度相同|
|TF-IDF 加权方法|则同时考虑词语在文本中出现的次数（频率）和多少文档包含该词语这两个维度，对在文本中频繁出现但并没有实际含义的词语赋予较少的权重、而给予有重要含义但出现次数较少的词语较大权重|
|对应变量加权|是指借用文本中词语与对应变量（市场收益率、波动率指数等）的关系来确定词语的权重|
#### 2.2.1.2 主题分类模型
在经济和金融领域的一个应用需求是在没有事先标注集的情况下，对文本按主题做分类。由于一篇文本的主题可能有多个，这类分类问题不同于按照事先标注集、将一篇文本仅归入一类的应用。主题分类问题的代表模型是由Blei et al.（2003）提出的隐含狄利克雷分配（Latent Dirichlet Allocation，LDA）模型，它是一种概率主题模型。

### 2.2.2 有监督学习方法
#### 2.2.2.1 经典的有监督机器学习方法
经典机器学习方法包括朴素贝叶斯、支持向量机、决策树、K 近邻算法、adaboost、k 邻近算法，最大熵法等。在金融领域的文本分析中，较为常用的传统机器学习方法包括朴素贝叶斯（Naïve Bayes）和支持向量机（Support Vector Machine，SVM）。

朴素贝叶斯算法假定文本中的特征互相独立，即不同词语不存在相互依赖关系。支持向量机（Vapnik，1996）是一种容许词语间存在相互依赖的有监督学习算法，既可以用于分类也可以用于回归分析。

#### 2.2.2.2 深度学习法
文本分析中，SVM等分类器虽然可以处理一定的非线性，但作为线性分类器，这类方法往往只能将输入数据切分为非常简单的区域，也容易导致过拟合等问题（Gentzkow et al.，2018）。

深度学习常用模型包括深度神经网络（Deep neural nets，DNN）、卷积神经网络（Convolutional Neural Network，CNN），和循环神经网络（Recurrent Neural Network，RNN）
等。

综上所述，**选择文本数据信息提取方法需综合考虑文本数据的来源、语言环境、内容长短以及需提取信息的特征等因素，同时评估各类方法的成本和收益**。在条件允许的情况下，可同时考虑简单方法和复杂方法，通过分析比较两类方法的差异来提高信息提取的准确性。当然，使用复杂方法时需要保证这些方法的透明性和可复制性（Loughran and McDonald，2016）。最后还要注意的是，数据的结构化转换和文本数据信息提取这两步的执行顺序需要依靠具体问题来决定，有时需要反复尝试才能找到最佳方案。

# 3. 文本大数据分析在经济学和金融学的应用
经济学：经济政策不确定性、预测通货膨胀和失业、对行业进行动态分类，和度量媒体政治倾向及新闻需求等问题。
金融学：刻画关注度、情绪、隐含波动率、和意见不一致性等四个方面的指标。

## 3.1 在经济学中的应用
### 3.1.1 经济政策不确定性指数
从构建方法看，EPU 指数属于作者自行选择词或词组的词典法。首先作者收集美国10家主流新闻媒体从1985 年以来的新闻数据，使用机器自动统计各媒体新闻中同时包含经济（economic /economics）、不确定（uncertain/ uncertainty）和政策10三类词语的月度文章数量。为控制新闻数量的时间趋势，作者对上述文章数量作标准化处理，再对这十个标准化的序列按月作平均，最后将序列转换为均值100 的指数。

### 3.1.2 行业分类
产业组织中的一个核心问题是定义行业边界和行业竞争力，传统的行业分类通常较为固定（如标准行业分类SIC 和北美产业分类体系NAICS 等）。Hoberg and Phillips（2016）根据上市公司年报中对企业产品描述的内容提出了一种新的行业分类方法，即**文本网络行业分类法（text-based network industry classification）**。首先统计全部文档中包含不同词语的个数W，并构建对应的词表；接着采用独热法将每个企业的产品描述文档转换为长度为W的向量，即如果文档中包含某词语，则对应位置的元素取值为1，否则为0。然后，计算不同文档向量的余弦相似性作为不同公司产品相似度的度量。最后根据这些相似度得分，结合聚类算法，可以将不同公司分组到不同的行业，最终得到300 个行业分类（与SIC 和NAICS中的行业数量一致）。

### 3.1.3 度量和预测经济周期
由于衡量经济活动的主要变量GDP 增长率无法实时观测，传统做法是使用市场上存在的一些即时指示变量，如金融市场、劳动力市场的数据等来作为反映经济活动的一致性指标。但这些方法的问题是，一方面这些指示变量和GDP 增长率之间的关系不稳定，另一方面使用高频金融数据只能反映经济层面的一部分信息，很难判断是何种信息因素在影响或反映经济变动状况。

相比传统数据，新闻数据覆盖领域广泛、信息可以被很多经济个体所获取、并且新闻内容可能与经济当前和未来状态密切相关。基于这一思想，Thorsrud（2018）从挪威日度频率的商业新闻数据，结合季度GDP 增长率数据，构建了日度经济周期指数。他们首先使用LDA 模型从新闻数据中提取出了80 个主题（财政政策、税收、货币政策等）。然后他们根据各个主题的语调（正面或负面），在混频时变动态因子模型的框架下，估计出了日度频率的新闻即时经济周期指数。

### 3.1.4 媒体政治倾向
Gentzkow and Shapiro（2010）使用美国新闻报纸数据，根据媒体新闻语言与国会共和党和民主党语言的相似性，构建了媒体政治倾向指数。他们首先利用2005 年国会议员发言记录数据，提取和民主党和共和党国会议员意识形态高度相关的1000个短语。最后将这些短语和政党意识形态对应起来，根据这1000 个短语在议员报告中出现的相对频率和议员的政治形态，回归找出最能预测党派的特征性短语和相应回归系数。再将2000-2005 年英文新闻头条数据按频率和词组长度挑选出新闻常用词汇，通过统计新闻报纸中这些短语出现的频率并结合回归系数对报纸的政治倾向进行分类。

## 3.2 在金融学中的应用
### 3.2.1 关注度指数
金融理论指出，关注是一种稀缺资源（Kahneman，1973），信息需要先被投资者关注到，才能通过投资者交易行为传递到资产价格中（Ben-Raphael et al.，2017），因此关注是信息反应的前提。

#### 3.2.1.1 投资者关注度
用文本数据度量散户投资者关注的方法主要有两类：
1. 利用网络搜索引擎统计对上市公司的搜索次数。
2. 二是网络论坛上股民对特定股票的发帖数量。

#### 3.2.1.2 媒体关注度
媒体关注度（Media Coverage）反映的是媒体对于特定上市公司、行业或市场的关注程度，通常通过统计特定新闻媒体所发布的与金融市场、上市公司相关的新闻数量来构建。

### 3.2.2 文本情绪
根据情绪主题的不同，文本情绪研究对象主要包括媒体语调（媒体新闻）、管理层语调（上市公司年报的管理层讨论与分析、盈利电话会议和其他公开信息披露文件）、投资者情绪（网络论坛发帖）等。情绪有关的文献主要从媒体情绪、管理层情绪和投资者情绪三个方面展开。

#### 3.2.2.1 媒体情绪（语调）
媒体情绪度量媒体报道内容中包含的乐观与悲观情绪。

#### 3.2.2.2 管理层语调
了使用财务报表直接报告公司经营状况外，上市公司还要定期发布公司的财务报告（季报、年报）季度盈余公告、管理层盈余公告、招股说明书等文件。这些文件包含上市公司管理层对当前经营状况的分析和未来发展方向的讨论，因此往往能反映管理层的决策和意图。

#### 3.2.2.3 投资者情绪
文本大数据为度量投资者情绪提供了新的数据源。一方面，由于投资者倾向于选择在网络论坛上发布与股票相关的评论帖子或者作出相关搜索，这些文本数据能直接反映他们对公司未来的看法、对市场当前状态的解读以及与自身投资决策相关的信息。另一方面，这些数据具有易获得、时间跨度长、覆盖公司数量多等特点，满足了从不同频率、不同层面研究情绪与资产价格关系的需求。

|文献|数据来源|数据类型|情绪指数类型|主要发现|
|:---|:---|:---|:---|:---|
|Antweilerand Frank（2004）|2000 年雅虎财经和Raging Bull|道琼斯工业平均指数和道琼斯互联网指数的45 家公司约150 万帖子数据|个股层面投资者情绪指数|情绪与同期收益率显著正相关，与未来收益率不相关|
|Kim and Kim（2014）|2005-2010 年雅虎财经|91家公司约3200万帖子|个股层面投资者情绪指数|情绪不能预测收益率、波动率、交易量，但受收益率影响|
|Tsukioka etal.（2018）|2001-2010 年雅虎财经日本股票版块|654 家公司相关的帖子数据||投资者情绪可用于解释IPO抑价现象|
|Sun et al.（2016）|1998-2011 年汤普森路透数据库|标普500 指数对应的1 分钟频率情绪数据||日内半小时情绪变化可预测日内收益率|
|Renault（2017）|2012-2016 年微博平台StockTwits|约6 千万帖子||第一半小时投资者情绪变化能预测标普500指数ETF 最后半小时收益率，但下个交易日反转|
|Behrendt andSchmidt（2018）|2015-2017 年Twitter|道琼斯指数成分股情绪数据（1 分钟频率）|个股Twitter情绪|情绪与日内波动率存在反馈效应，但经济意义不显著|
|Da et al.（2011）|谷歌搜索| 118 词日搜索频率|FEARS 指数近似市场情绪|FEARS 能预测股票市场波动，收益率存在同期正相关，与随后收益率负相关|
|Gao etal.（2018）|2004-2014 年谷歌搜索词|搜索频率|周度国别投资者情绪指数|投资者情绪指数负向预测未来一周股票市场的收益率；并检验定价困难和有限套利等可预测性渠道|

简而言之，现有国内外文献都观察到投资者情绪与市场变量间的同期关系或者投资者情绪受市场变量影响，但投资者情绪的预测能力有限。

### 3.2.3 新闻隐含波动率指数

### 3.2.4 投资者分歧

# 4.结论和展望
## 4.1 变化
和经典的数据分析方法相比，文本大数据给经济学和金融学的实证研究至少带来了四个变化：
1. 经典实证分析采用的数据往往已经是结构化数据，而文本大数据往往是非结构化数据。
2. 经典实证分析数据中的变量定义往往比较清晰，这种清晰的边界往往是通过收集数据时设计的问卷、或者实际经济和金融活动运行需要就已经事先界定来实现。
3. 经典实证方法往往采用获取的全样本数据做回归分析，然后通过不同的设定和变化做稳健性检验。
4. 使用文本大数据需要有跨学科领域的人才。

## 4.2 趋势
未来几年，在经济和金融领域运用文本大数据研究方面，可能会有如下趋势：
1. 开拓更丰富的数据源。目前文本数据库的主要数据源包括新闻、网络论坛帖子、公司财报、消费者评价、重要人物的发言等。但还有大量的文本数据尚未被研究所使用，如政府工作报告和规划、网络自媒体公众号文章、微博大V 观点、书籍、档案、专利网站、法院判决、医生处方等。运用有监督或者无监督的机器学习方法、深度学习方法来分析这些数据在未来几年将是研究热点。
2. 采用文本研究的问题会更加深入和广泛。如如何在中文语境以及复杂的长文本下的构建情绪指数并用于预测；如何从文本数据的文件大小、数字和汉字的占比、图表数量、句子长短等角度加强对文本可读性的研究，又如如何提取国内主流新闻数据提取隐含信息（波动率、不确定性等），并考察文本信息与资本市场、宏观经济层面、微观个体表现等之间的关系。
3. 采用文本大数据展开的研究将不仅满足于基于相关关系的预测问题，因果关系相关的研究也将逐渐进入研究人员的视野。例如，Athey (2017)就考虑了如何将机器学习用到基于文本、摄像头等产生的数据而展开的政策效果的评估中。最后，由于文本大数据分析往往需要同时运用经济、金融、计算机、心理学等多个领域的知识和技术，对高素质的跨学科人才将产生较大需求，因此研究机构和高校可按照自身的学科优势来培养跨学科、复合型的研究人才。







